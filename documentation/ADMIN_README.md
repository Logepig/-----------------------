# Административная панель

## Описание

Создана специальная административная панель для пользователя с именем `admin`. Эта панель позволяет просматривать и управлять всеми таблицами базы данных.

## Функциональность

### Автоматическое перенаправление
- При авторизации под именем `admin` происходит автоматическое перенаправление на страницу `/administrator.html`
- Пользователь admin не имеет доступа к другим страницам (index.html, MyProjects.html, Profile.html) - при попытке доступа к ним происходит перенаправление на админ-панель
- При выходе из системы происходит перенаправление на главную страницу

### Просмотр таблиц
На странице доступны следующие таблицы:
1. **users** - Пользователи
2. **projects** - Проекты
3. **project_memberships** - Членство в проектах
4. **project_join_requests** - Заявки на вступление
5. **project_promotion_requests** - Заявки на повышение
6. **project_stages** - Этапы проектов
7. **project_file_groups** - Группы файлов
8. **project_files** - Файлы
9. **project_tasks** - Задачи
10. **project_task_files** - Файлы задач

### Удаление записей
- В последней колонке каждой строки таблицы находится красный плюс (повернутый на 45°)
- При клике на плюс появляется подтверждение удаления
- После подтверждения запись удаляется из базы данных
- Таблица автоматически обновляется после удаления

### Интерфейс
- **Выбор таблицы**: выпадающий список (select) для выбора таблицы
- **Счетчик записей**: отображает количество записей в выбранной таблице
- **Горизонтальная прокрутка**: таблица имеет `overflow-x: scroll` для удобного просмотра таблиц с большим количеством колонок
- **Темная/светлая тема**: кнопка переключения темы в верхней панели
- **Адаптивный дизайн**: корректно отображается на мобильных устройствах

## API эндпоинты

### Получение данных таблицы
```
GET /api/admin/tables/:tableName
```
Требуется авторизация под admin.

### Удаление записи
```
DELETE /api/admin/tables/delete
Content-Type: application/json

{
  "table": "имя_таблицы",
  "row": { /* объект со всеми полями записи */ }
}
```
Требуется авторизация под admin.

## Безопасность

- Доступ к административным эндпоинтам защищен middleware `isAdmin`
- Проверка на SQL injection: используется белый список разрешенных таблиц
- Только пользователь с username === 'admin' имеет доступ к панели
- При попытке доступа без прав происходит ошибка 403

## Технические детали

### Файлы
- `public/administrator.html` - HTML страница админ-панели
- `public/css/pages/administrator.css` - стили для админ-панели
- `public/js/administrator.js` - JavaScript логика админ-панели
- `server.js` - серверная логика (эндпоинты и middleware)

### Зависимости
Использует существующую инфраструктуру:
- Express.js для серверной части
- SQLite3 для базы данных
- Express-session для управления сессиями

## Первоначальная настройка

Для создания пользователя admin выполните команду:

```bash
npm run create-admin
```

Это создаст пользователя со следующими данными:
- **Username**: admin
- **Password**: admin123

⚠️ **ВАЖНО**: Рекомендуется изменить пароль после первого входа для повышения безопасности!

## Использование

1. Создайте пользователя admin (если еще не создан): `npm run create-admin`
2. Запустите сервер: `npm start`
3. Откройте браузер и перейдите на главную страницу
4. Авторизуйтесь под пользователем с username `admin` и паролем `admin123`
5. Вы автоматически попадете на страницу администратора
6. Выберите таблицу из выпадающего списка
7. Просматривайте данные и удаляйте записи по необходимости
8. Для выхода нажмите кнопку "Выйти" в правом верхнем углу

